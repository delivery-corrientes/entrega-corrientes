<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Pedido</title>
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>

<h1>ðŸ›’ Tu pedido</h1>

<div id="carrito"></div>

<h3 id="total"></h3>

<br>

<a href="pedido_enviado.html">
  <button>Enviar pedido</button>
</a>

<br><br>

<a href="../index.html">
  <button>Volver al inicio</button>
</a>

<script>
const carrito = JSON.parse(localStorage.getItem("carrito")) || [];
const contenedor = document.getElementById("carrito");
let total = 0;

if (carrito.length === 0) {
  contenedor.innerHTML = "<p>El carrito estÃ¡ vacÃ­o.</p>";
} else {
  const resumen = {};

  carrito.forEach(item => {
    if (!resumen[item.nombre]) {
      resumen[item.nombre] = { precio: item.precio, cantidad: 1 };
    } else {
      resumen[item.nombre].cantidad++;
    }
  });

  for (let nombre in resumen) {
    const item = resumen[nombre];
    const subtotal = item.precio * item.cantidad;
    total += subtotal;

    contenedor.innerHTML += `
      <p>
        <strong>${nombre}</strong><br>
        Cantidad: ${item.cantidad}<br>
        Subtotal: $${subtotal}
      </p>
      <hr>
    `;
  }
}

document.getElementById("total").innerText = "Total: $" + total;
localStorage.setItem("totalPedido", total);
</script>

</body>
</html>
