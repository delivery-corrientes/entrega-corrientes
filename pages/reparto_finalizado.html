<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Pedido Entregado</title>
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>

<h1>âœ… Pedido entregado</h1>
<p>El pedido fue entregado correctamente.</p>

<script>
  // Obtener pedido actual
  const pedido = JSON.parse(localStorage.getItem("pedidoActual"));

  if (pedido) {
    // Obtener historial existente
    let historial = JSON.parse(localStorage.getItem("historialPedidos")) || [];

    // Agregar pedido al historial
    historial.push({
      ...pedido,
      estado: "ENTREGADO",
      fecha: new Date().toLocaleString()
    });

    // Guardar historial actualizado
    localStorage.setItem("historialPedidos", JSON.stringify(historial));

    // Limpiar pedido actual
    localStorage.removeItem("pedidoActual");
  }

  // Redirigir al historial
  setTimeout(() => {
    window.location.href = "historial.html";
  }, 2000);
</script>

<p>Redirigiendo al historial...</p>

<a href="../index.html">
  <button>Volver al inicio</button>
</a>

</body>
</html>

